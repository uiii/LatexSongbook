--- orig/lib/output.c
+++ mod/lib/output.c
@@ -13,8 +13,10 @@
 #include <internal.h>
 
 #include <stdio.h>
+#ifndef WIN32
 #include <pwd.h>
 #include <grp.h>
+#endif
 #include <time.h>
 #include <limits.h>
 #include <sys/param.h>
@@ -63,8 +65,10 @@
 th_print_long_ls(TAR *t)
 {
 	char modestring[12];
+#ifndef WIN32
 	struct passwd *pw;
 	struct group *gr;
+#endif
 	uid_t uid;
 	gid_t gid;
 	char username[_POSIX_LOGIN_NAME_MAX];
@@ -82,19 +86,22 @@
 #endif
 
 	uid = th_get_uid(t);
+#ifndef WIN32
 	pw = getpwuid(uid);
-	if (pw == NULL)
-		snprintf(username, sizeof(username), "%d", uid);
-	else
+	if (pw != NULL)
 		strlcpy(username, pw->pw_name, sizeof(username));
-
+	else
+#endif
+		snprintf(username, sizeof(username), "%d", uid);
 	gid = th_get_gid(t);
+#ifndef WIN32
 	gr = getgrgid(gid);
-	if (gr == NULL)
-		snprintf(groupname, sizeof(groupname), "%d", gid);
-	else
+	if (gr != NULL)
 		strlcpy(groupname, gr->gr_name, sizeof(groupname));
-
+	else
+#endif
+		snprintf(groupname, sizeof(groupname), "%d", gid);
+		
 	strmode(th_get_mode(t), modestring);
 	printf("%.10s %-8.8s %-8.8s ", modestring, username, groupname);
 
